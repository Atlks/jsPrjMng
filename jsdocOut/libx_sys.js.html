<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: libx/sys.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: libx/sys.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>function tipsNendThrowEx(æç¤ºå†…å®¹) {


    throw  "ex@" + æç¤ºå†…å®¹

}

global['parse_ini_file'] = parse_ini_file

/**
 * not rcm use ini_test file..just use cmd cfg togthr file btr..
 *
 * @param fil

 */
function parse_ini_file(fil) {
    const path = require("path");
   // var ini_test = require('ini_test');
    const ini_test = require("ini_test");
    const fs = require("fs");
    // const iopath = path.join(__dirname, '../cfgDep.ini_test'); // å¼•ç”¨Pos.iniçš„ç›¸å¯¹åœ°å€
    const Info = ini_test.parse(fs.readFileSync(fil, 'utf-8'));
    return Info
}

require("./file")


global['requirex'] = requirex

/**
 *
 * @param f
 */
function requirex(f) {

    if (!file_exists(f))
        f = "./" + f;
    if (!file_exists(f))
        f = "./libBiz/" + f;


    try {
        console.log(f)
        require(f)
    } catch (e) {
        console.warn(e.message)
    }

}


//console.log(is_int("12"))
/**
 *åˆ¤æ–­æ˜¯å¦æ•´æ•°
 * @param num
 */
function is_int(num) {
    return parseInt(num) == parseFloat(num)
}

function tipsNend(æç¤ºå†…å®¹) {

    return () => {
        throw  "ex@" + æç¤ºå†…å®¹
    }
}

/**
 *
 * @returns {string}
 */
function callrmtRstapiUrl() {

    return "callrmt?nocache348=" + Math.random() + "&amp;callfun=";
}

try {

    global['isWinformEnv'] = isWinformEnv
} catch (e) {

}

try {
    window['isWinformEnv'] = isWinformEnv
} catch (e) {

}
try {
    window['isset'] = isset
} catch (e) {

}


try {
    global['isset'] = isset
} catch (e) {

}


global['getcurReqID'] = getcurReqID

/**
 *  theard local
 */
function getcurReqID() {
    const async_hooks = require('async_hooks');

    //  let async_hooks=global['async_hooks']
    // è¿”å›å½“å‰å¼‚æ­¥ä½œç”¨åŸŸçš„asyncId
    const eid = async_hooks.executionAsyncId();

// è¿”å›è§¦å‘æ­¤å¼‚æ­¥æ“ä½œçš„å¼‚æ­¥ä½œç”¨åŸŸçš„asyncId
    const tid = async_hooks.triggerAsyncId();
    return eid
}

function isset(varname) {
    try {
        varname = trim(varname);
        rzt = typeof (eval(varname));
        return typeof (varname) != "undefined";
    } catch (e) {
        console.log("[43isset()] " + e.message);
        //  console_log(e);
        return false;
    }

}


function ifx(æ¡ä»¶, ...é€šè¿‡åæ‰§è¡Œçš„æŒ‡ä»¤) {
    // if(typeof  æ¡ä»¶ =="function")
    //     æ¡ä»¶=æ¡ä»¶()

    console.log("[å¦‚æœ] cdt=>" + æ¡ä»¶)
    if (æ¡ä»¶) {
        {
            let fns = arguments;
            let rzt;

            for (var i = 1; i &lt; fns.length; i++) {
                let f = fns[i];
                // console.log("cur f is =>"+f)
                rzt = f(rzt);

            }
            return rzt;
        }
    }
}

function isWinformEnv() {

    //if(isset("window.external"))
    //  window.external &amp;&amp; window.external.external ex..   winformx
    // window.external &amp;&amp; &amp;&amp; window.external.external==false .electr env
    //
    //  window.external ex just console env

    //  alert(window.external)  //in eletr env is true..
    //  alert( typeof window.external.callFun)  //in eletr env is false..
    try {
        if (window.external &amp;&amp; typeof window.external.callFun == "unknown") {


            return true;
        }
        if (window.external &amp;&amp; typeof window.external.callFun == "undefined") {


            return false;  //electron env


        }


    } catch (e) {
        //console env just err
        return false;
    }

    return false;


    // alert(window.external.callFun)  æ— æ•ˆè°ƒç”¨å‚æ•°å¯èƒ½ä¼šè‡ªä¸œexe
    try {
        if (window.external.callFun) {
            console.log(":62 winform env")
            return true;
        } else {
            alert("54")
            console.log(":68 not winform env")
            return false;
        }

    } catch (e) {
        alert("61")
        ///  alert(e)
        console.log(":74 not   winform env")
        return false;
    }

}

try {
    if (!isset("global"))
        window['global'] = [];
} catch (e) {
    console.log(e.message)

}

if (isWinformEnv()) {

    console.log(" cur env::" + isWinformEnv())
    __dirname = "";
} else {
    console.log(" cur env::" + isWinformEnv())
}

global['curDatetimeV2'] = curDatetimeV2

function curDatetimeV2() {


    return formatDate(new Date())
    // const date = new Date();
    //  console.log(date.toLocaleString('en-US', { timeZone: 'America/New_York' })); // 2/16/2023, 8:25:05 AM


    // return date.toLocaleString('zh-CN', {timeZone: 'utc'});
}


global['curDatetime'] = curDatetime

function curDatetime() {


    return formatDate(new Date())
    // const date = new Date();
    //  console.log(date.toLocaleString('en-US', { timeZone: 'America/New_York' })); // 2/16/2023, 8:25:05 AM


    // return date.toLocaleString('zh-CN', {timeZone: 'utc'});
}


function padTo2Digits(num) {
    if (num.toString().length == 1)
        return "" + "0" + num;
    else
        return num;
}


global['copyProp'] = copyProp

function copyProp(frm, to) {
    for (let key in frm) {
        // console.log(frm, frm[key])
        to[key] = frm[key];
    }
}

global['idBasetime'] = idBasetime

/**
 *
 * @param date
 * @returns {string}
 */
function idBasetime() {
    let date = new Date()
    return (
        [
            date.getFullYear(),
            padTo2Digits(date.getMonth() + 1),
            padTo2Digits(date.getDate()),
        ].join('') +
        '_' +
        [
            padTo2Digits(date.getHours()),
            padTo2Digits(date.getMinutes()),
            padTo2Digits(date.getSeconds()),
        ].join('')
    );
}


/**
 *
 * @param date
 * @returns {string}
 */
function formatDate(date) {
    return (
        [
            date.getFullYear(),
            padTo2Digits(date.getMonth() + 1),
            padTo2Digits(date.getDate()),
        ].join('-') +
        ' ' +
        [
            padTo2Digits(date.getHours()),
            padTo2Digits(date.getMinutes()),
            padTo2Digits(date.getSeconds()),
        ].join(':')
    );
}

// ğŸ‘‡ï¸ 2021-10-24 16:21:23 (yyyy-mm-dd hh:mm:ss)
//console.log();

console.log(curDatetime())


global['getLibdir'] = getLibdir

function getLibdir() {
    // _file=>C:\modyfing\jbbot\zmng\shangxiafen.htm
    // if embed in htm...filename just htm path
    // if(!__filename)
    //     __filename=""


    //   console.log("_file=>" + __filename)  //if in html file ,...just for html file path
    //   console.log("__dirname=>" + __dirname)
    try {
        //   console.log(__dirname)
        let libdir = __dirname + '/../libx/'
// C:\modyfing\jbbot\zmng/../lib/
        //   console.log(libdir)

        const fs = require('fs');

        //   console.log("exist dir:=>" + fs.existsSync(libdir))

        if (!fs.existsSync(libdir)) {
            //   console.log(libdir + " not exist")
            libdir = __dirname + '/libx/'
        }
        //   console.log("libdir=>" + libdir)
        return libdir;
    } catch (e) {
        return ""

    }

}




</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Issue_login_credentials.html">Issue_login_credentials</a></li><li><a href="findWdByBufpartNwrtToUi.html">findWdByBufpartNwrtToUi</a></li><li><a href="kexiafenBal.html">kexiafenBal</a></li></ul><h3>Global</h3><ul><li><a href="global.html#QryShangxiafen">QryShangxiafen</a></li><li><a href="global.html#accFiles">accFiles</a></li><li><a href="global.html#accpt2423">accpt2423</a></li><li><a href="global.html#addUserCore">addUserCore</a></li><li><a href="global.html#agtbal648">agtbal648</a></li><li><a href="global.html#allFileScore">allFileScore</a></li><li><a href="global.html#authChk">authChk</a></li><li><a href="global.html#bin2hex">bin2hex</a></li><li><a href="global.html#buildUrlNgetV3">buildUrlNgetV3</a></li><li><a href="global.html#callCmd">callCmd</a></li><li><a href="global.html#callFunPressEx">callFunPressEx</a></li><li><a href="global.html#call_func">call_func</a></li><li><a href="global.html#callrmt">callrmt</a></li><li><a href="global.html#callrmtRstapiUrl">callrmtRstapiUrl</a></li><li><a href="global.html#cashinAjax">cashinAjax</a></li><li><a href="global.html#checkAgtidErr">checkAgtidErr</a></li><li><a href="global.html#checkWhiteIp">checkWhiteIp</a></li><li><a href="global.html#check_login_credentials">check_login_credentials</a></li><li><a href="global.html#del_file">del_file</a></li><li><a href="global.html#dsl_callFrmUiToBiz">dsl_callFrmUiToBiz</a></li><li><a href="global.html#dsl_callFunCmdMode">dsl_callFunCmdMode</a></li><li><a href="global.html#errcodeMsgNodeEnv">errcodeMsgNodeEnv</a></li><li><a href="global.html#exchLoginVisa%25E4%25BA%25A4%25E6%258D%25A2visa">exchLoginVisaäº¤æ¢visa</a></li><li><a href="global.html#exit">exit</a></li><li><a href="global.html#explode">explode</a></li><li><a href="global.html#findPlayer">findPlayer</a></li><li><a href="global.html#findWdByBufpart">findWdByBufpart</a></li><li><a href="global.html#findWdLstByPartwd">findWdLstByPartwd</a></li><li><a href="global.html#formatDate">formatDate</a></li><li><a href="global.html#fs_watch">fs_watch</a></li><li><a href="global.html#funtion_exist">funtion_exist</a></li><li><a href="global.html#geneMmncCrpt">geneMmncCrpt</a></li><li><a href="global.html#getConn">getConn</a></li><li><a href="global.html#getDbdir">getDbdir</a></li><li><a href="global.html#getLoginToken">getLoginToken</a></li><li><a href="global.html#getcurReqID">getcurReqID</a></li><li><a href="global.html#hex2bin">hex2bin</a></li><li><a href="global.html#hexToStr">hexToStr</a></li><li><a href="global.html#http_get">http_get</a></li><li><a href="global.html#http_getSync">http_getSync</a></li><li><a href="global.html#http_get_core">http_get_core</a></li><li><a href="global.html#http_get_jqGet">http_get_jqGet</a></li><li><a href="global.html#http_get_jqGetSync">http_get_jqGetSync</a></li><li><a href="global.html#http_get_jqStyle">http_get_jqStyle</a></li><li><a href="global.html#idBasetime">idBasetime</a></li><li><a href="global.html#importUser">importUser</a></li><li><a href="global.html#importUserUploadUserdt">importUserUploadUserdt</a></li><li><a href="global.html#includeEsm">includeEsm</a></li><li><a href="global.html#isExistUser">isExistUser</a></li><li><a href="global.html#is_int">is_int</a></li><li><a href="global.html#json_encode">json_encode</a></li><li><a href="global.html#json_encode_Err">json_encode_Err</a></li><li><a href="global.html#kick">kick</a></li><li><a href="global.html#loadToDataTable">loadToDataTable</a></li><li><a href="global.html#loadToDataTableV2">loadToDataTableV2</a></li><li><a href="global.html#login">login</a></li><li><a href="global.html#loginLocal">loginLocal</a></li><li><a href="global.html#loginV2">loginV2</a></li><li><a href="global.html#main">main</a></li><li><a href="global.html#md5">md5</a></li><li><a href="global.html#msg_recv">msg_recv</a></li><li><a href="global.html#msg_recvListen">msg_recvListen</a></li><li><a href="global.html#oplog_qry">oplog_qry</a></li><li><a href="global.html#padTo2Digits">padTo2Digits</a></li><li><a href="global.html#parse_ini_file">parse_ini_file</a></li><li><a href="global.html#pdo_connV2">pdo_connV2</a></li><li><a href="global.html#pdo_connV3">pdo_connV3</a></li><li><a href="global.html#pdo_insertV3">pdo_insertV3</a></li><li><a href="global.html#pdo_insertV4">pdo_insertV4</a></li><li><a href="global.html#pdo_insertV5">pdo_insertV5</a></li><li><a href="global.html#pdo_insert_coreV2">pdo_insert_coreV2</a></li><li><a href="global.html#pdo_insert_noEx">pdo_insert_noEx</a></li><li><a href="global.html#pdo_query">pdo_query</a></li><li><a href="global.html#pdo_queryV2">pdo_queryV2</a></li><li><a href="global.html#pdo_queryV5">pdo_queryV5</a></li><li><a href="global.html#pdo_query_fromData">pdo_query_fromData</a></li><li><a href="global.html#pdo_save">pdo_save</a></li><li><a href="global.html#pdo_saveV2">pdo_saveV2</a></li><li><a href="global.html#pdo_saveV5">pdo_saveV5</a></li><li><a href="global.html#pipe">pipe</a></li><li><a href="global.html#ptn_getLastPtn">ptn_getLastPtn</a></li><li><a href="global.html#ptn_getPartns">ptn_getPartns</a></li><li><a href="global.html#ptn_getPartnsLast">ptn_getPartnsLast</a></li><li><a href="global.html#ptn_newprtn">ptn_newprtn</a></li><li><a href="global.html#qryAgtBal">qryAgtBal</a></li><li><a href="global.html#qryAgtBalINweb">qryAgtBalINweb</a></li><li><a href="global.html#qryCashinOutAplctnFmevt">qryCashinOutAplctnFmevt</a></li><li><a href="global.html#qry_cashin_aplctn">qry_cashin_aplctn</a></li><li><a href="global.html#query">query</a></li><li><a href="global.html#readExcelFromUploadFile">readExcelFromUploadFile</a></li><li><a href="global.html#readFileFromUploadFile">readFileFromUploadFile</a></li><li><a href="global.html#readFromExcel">readFromExcel</a></li><li><a href="global.html#recv_nml_msg">recv_nml_msg</a></li><li><a href="global.html#refresh_login_token">refresh_login_token</a></li><li><a href="global.html#requireAutoload">requireAutoload</a></li><li><a href="global.html#requirex">requirex</a></li><li><a href="global.html#retry">retry</a></li><li><a href="global.html#rvw_passAjax">rvw_passAjax</a></li><li><a href="global.html#rvw_passCore">rvw_passCore</a></li><li><a href="global.html#rvw_rfs">rvw_rfs</a></li><li><a href="global.html#saveLoginVisa">saveLoginVisa</a></li><li><a href="global.html#score_orderQryShagnxiafenByUnameOrderid">score_orderQryShagnxiafenByUnameOrderid</a></li><li><a href="global.html#searchPlayer">searchPlayer</a></li><li><a href="global.html#searchPlayerAll">searchPlayerAll</a></li><li><a href="global.html#sendLoginVisa">sendLoginVisa</a></li><li><a href="global.html#setEchoWinTxt">setEchoWinTxt</a></li><li><a href="global.html#setGlobalErrCatch">setGlobalErrCatch</a></li><li><a href="global.html#sha256hash">sha256hash</a></li><li><a href="global.html#sha256hashFromHex32bit">sha256hashFromHex32bit</a></li><li><a href="global.html#updateBal">updateBal</a></li><li><a href="global.html#upload">upload</a></li><li><a href="global.html#uploadIni">uploadIni</a></li><li><a href="global.html#watchHdlr">watchHdlr</a></li><li><a href="global.html#writeFileSyncV2">writeFileSyncV2</a></li><li><a href="global.html#writeFileV3">writeFileV3</a></li><li><a href="global.html#xiafen">xiafen</a></li><li><a href="global.html#xiafen745">xiafen745</a></li><li><a href="global.html#%25E4%25B8%258A%25E5%2588%2586">ä¸Šåˆ†</a></li><li><a href="global.html#%25E4%25B8%258B%25E5%2588%2586">ä¸‹åˆ†</a></li><li><a href="global.html#%25E4%25BD%2599%25E9%25A2%259D">ä½™é¢</a></li><li><a href="global.html#%25E4%25BF%259D%25E5%25AD%2598%25E7%2599%25BB%25E5%25BD%2595%25E5%2587%25AD%25E6%258D%25AE">ä¿å­˜ç™»å½•å‡­æ®</a></li><li><a href="global.html#%25E5%25A6%2582%25E6%259E%259C">å¦‚æœ</a></li><li><a href="global.html#%25E5%25B8%25AE%25E5%258A%25A9">å¸®åŠ©</a></li><li><a href="global.html#%25E5%25BE%25AA%25E7%258E%25AF">å¾ªç¯</a></li><li><a href="global.html#%25E6%2589%25A7%25E8%25A1%258C%25E6%258C%2587%25E4%25BB%25A4%25E5%25BA%258F%25E5%2588%2597">æ‰§è¡ŒæŒ‡ä»¤åºåˆ—</a></li><li><a href="global.html#%25E6%2589%25A7%25E8%25A1%258C%25E6%258C%2587%25E4%25BB%25A4%25E5%25BA%258F%25E5%2588%2597FP">æ‰§è¡ŒæŒ‡ä»¤åºåˆ—FP</a></li><li><a href="global.html#%25E6%25A0%25B8%25E9%25AA%258C%25E5%25AF%2586%25E7%25A0%2581%25E9%2594%2599%25E8%25AF%25AF">æ ¸éªŒå¯†ç é”™è¯¯</a></li><li><a href="global.html#%25E6%25B5%2581%25E6%25B0%25B4">æµæ°´</a></li><li><a href="global.html#%25E7%2599%25BB%25E5%25BD%2595%25E6%25B5%2581%25E7%25A8%258B">ç™»å½•æµç¨‹</a></li><li><a href="global.html#%25E7%2599%25BB%25E5%25BD%2595%25E6%25B5%2581%25E7%25A8%258Btoken%25E6%25A8%25A1%25E5%25BC%258F">ç™»å½•æµç¨‹tokenæ¨¡å¼</a></li><li><a href="global.html#%25E7%2599%25BB%25E5%25BD%2595%25E6%25B5%2581%25E7%25A8%258B%25E5%25AF%2586%25E7%25A0%2581%25E6%25A8%25A1%25E5%25BC%258F">ç™»å½•æµç¨‹å¯†ç æ¨¡å¼</a></li><li><a href="global.html#%25E8%25BF%2594%25E5%259B%259E">è¿”å›</a></li><li><a href="global.html#%25E8%25BF%2594%25E5%259B%259E%25E7%25BB%2593%25E6%259E%259C">è¿”å›ç»“æœ</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Sat Oct 28 2023 18:39:05 GMT+0700 (Indochina Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
